---
# Registry Credentials Secret Template
# Users should apply this secret in Karmada and ensure it's propagated to member clusters
# Replace <USERNAME> and <PASSWORD> with actual registry credentials
# 
# Example usage:
# 1. Replace placeholders with actual credentials
# 2. Apply to Karmada: kubectl apply -f registry-credentials-secret.yaml
# 3. Create PropagationPolicy to distribute to member clusters
#
apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials
  namespace: stateful-migration
  labels:
    app.kubernetes.io/name: registry-credentials
    app.kubernetes.io/part-of: stateful-migration-operator
    checkpoint-migration.dcn.io: "true"
type: Opaque
data:
  # Base64 encoded registry username
  # echo -n "your-username" | base64
  username: <BASE64_ENCODED_USERNAME>
  
  # Base64 encoded registry password
  # echo -n "your-password" | base64
  password: <BASE64_ENCODED_PASSWORD>
  
  # Optional: Base64 encoded registry URL (if not using default)
  # echo -n "your-registry.com" | base64
  registry: <BASE64_ENCODED_REGISTRY_URL>
---
# PropagationPolicy to distribute registry credentials to member clusters
apiVersion: policy.karmada.io/v1alpha1
kind: PropagationPolicy
metadata:
  name: registry-credentials-propagation
  namespace: stateful-migration
  labels:
    app.kubernetes.io/name: registry-credentials
    app.kubernetes.io/part-of: stateful-migration-operator
spec:
  resourceSelectors:
  - apiVersion: v1
    kind: Secret
    name: registry-credentials
  placement:
    clusterAffinity:
      # This will be updated by the StatefulMigration controller
      # to match the source clusters specified in StatefulMigration resources
      clusterNames: []
    replicaScheduling:
      replicaDivisionPreference: Weighted
      replicaSchedulingType: Divided 