apiVersion: migration.dcnlab.com/v1
kind: CheckpointBackup
metadata:
  name: example-cron-stop-pod-checkpoint
  namespace: default
spec:
  # Regular cron schedule - will run once and then delete pod
  schedule: "0 2 * * *"  # Daily at 2 AM
  
  # Set to true to delete pod after first successful checkpoint
  stopPod: true
  
  podRef:
    name: example-pod
    namespace: default
  
  resourceRef:
    apiVersion: apps/v1
    kind: Deployment
    name: example-deployment
    namespace: default
  
  registry:
    url: "docker.io"
    repository: "myrepo/checkpoints"
    secretRef:
      name: registry-credentials
      namespace: default
  
  containers:
  - name: app-container
    image: "myrepo/checkpoints:example-pod-app-container-checkpoint"
